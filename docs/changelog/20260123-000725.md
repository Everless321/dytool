# 任务: 已有用户自动获取用户名和作品数量更新

## 日期
2026-01-23 00:07:25

## 任务描述
为已添加的用户提供自动获取用户信息并更新的功能，包括昵称和作品总数。

## 待办事项
- [x] 添加单个用户刷新功能（右键菜单）
- [x] 添加批量刷新功能（工具栏按钮）
- [x] 显示刷新状态
- [x] 存储和显示作品总数

## 实施细节

### 1. DouyinUser 模型更新
- 新增 `awemeCount: Int?` 字段存储作品总数

### 2. DatabaseService 更新
- 数据库表新增 `aweme_count` 列
- `getAllUsers` 读取 aweme_count
- `addUser` 支持 aweme_count 参数
- `updateUser` 保存 aweme_count

### 3. 刷新功能
- `refreshUserInfo` 和 `refreshAllUserInfo` 同时更新昵称和作品数量
- 右键菜单 "刷新信息" 选项
- 工具栏批量刷新按钮

### 4. UserRowView 显示优化
- 显示下载进度：`已下载/总数` 格式
- 下载完成显示绿色，未完成显示橙色
- 无作品总数时只显示已下载数量

## 使用方式
1. 单个用户：右键点击用户 → 刷新信息
2. 批量刷新：点击工具栏刷新按钮（↻）

## 显示效果
- 有作品总数时：`主页 | 156/200`（橙色）或 `主页 | 200/200`（绿色）
- 无作品总数时：`主页 | 156 已下载`（绿色）

## 注意事项
- 需要配置有效的抖音 Cookie 才能获取完整用户信息
- 批量刷新时会自动跳过失败的用户
