# 视频浏览性能优化 - 过滤架构重构

## 任务描述
重构过滤逻辑，支持几十万视频的高效浏览

## 待办事项
- [x] 重构过滤逻辑：条件变化时重新扫描，只收集符合条件的路径
- [x] 作者过滤直接扫描对应文件夹
- [x] 标签/分类过滤先查数据库获取 awemeId 列表
- [x] 添加过滤加载状态显示
- [x] 测试验证

## 执行结果

### 架构变更

**旧架构问题**：
- 加载所有视频到内存再过滤
- 过滤条件变化时加载全部剩余视频
- 对几十万视频不可行

**新架构**：
- 过滤条件变化时重新扫描文件系统
- 只收集符合条件的文件路径
- 分页加载过滤后的结果

### 修改内容

**VideoGalleryView.swift**

1. 新增状态变量：
   - `isFiltering: Bool` - 过滤加载状态

2. 新增函数：
   - `applyFilters()` - 应用过滤器，重新扫描
   - `getMatchingAwemeIds()` - 根据分析条件获取匹配的 awemeId 集合

3. 重写 `loadVideos()`：
   - 作者过滤：只扫描该作者的文件夹
   - 分析条件过滤：先获取匹配的 awemeId，扫描时只包含匹配文件
   - 每页加载 50 个（从 30 增加）

4. 移除 `loadAllVideosForFiltering()` - 不再需要

5. UI 更新：
   - 工具栏显示过滤加载指示器
   - 过滤中显示"正在筛选..."状态

6. 所有 onChange 处理器统一调用 `applyFilters()`

### 性能改进

| 场景 | 旧架构 | 新架构 |
|------|--------|--------|
| 全部视频 | 扫描全部文件 | 扫描全部文件（无变化） |
| 选择作者 | 扫描全部 + 过滤 | 只扫描该作者文件夹 |
| 标签过滤 | 加载全部视频到内存 | 只收集匹配的文件路径 |

### 编译状态
BUILD SUCCEEDED
